---
title: "LlamaIndex"
sidebarTitle: "LlamaIndex"
weight: 2
---

import {
  PyFrameworksLlamaindexAddReranker,
  PyFrameworksLlamaindexFiltering,
  PyFrameworksLlamaindexHybridSearch,
  PyFrameworksLlamaindexQuickStart,
} from '/snippets/integrations.mdx';

![Illustration](../assets/llama-index.jpg)

## Quick start
You would need to install the integration via `pip install llama-index-vector-stores-lancedb` in order to use it. 
You can run the below script to try it out :
<CodeBlock filename="Python" language="Python" icon="python">
  {PyFrameworksLlamaindexQuickStart}
</CodeBlock>

Checkout Complete example here - [LlamaIndex demo](../notebooks/LlamaIndex_example.ipynb)

### Filtering
For metadata filtering, you can use a Lance SQL-like string filter as demonstrated in the example above. Additionally, you can also filter using the `MetadataFilters` class from LlamaIndex:
<CodeBlock filename="Python" language="Python" icon="python">
  {PyFrameworksLlamaindexFiltering}
</CodeBlock>

### Hybrid Search
For complete documentation, refer [here](https://lancedb.github.io/lancedb/hybrid_search/hybrid_search/). This example uses the `colbert` reranker. Make sure to install necessary dependencies for the reranker you choose.
<CodeBlock filename="Python" language="Python" icon="python">
  {PyFrameworksLlamaindexHybridSearch}
</CodeBlock>

In the above snippet, you can change/specify query_type again when creating the engine/retriever.

## API reference
The exhaustive list of parameters for `LanceDBVectorStore` vector store are :  
- `connection`: Optional, `lancedb.db.LanceDBConnection` connection object to use. If not provided, a new connection will be created.
- `uri`: Optional[str], the uri of your database. Defaults to `"/tmp/lancedb"`.
- `table_name` : Optional[str], Name of your table in the database. Defaults to `"vectors"`.
- `table`: Optional[Any], `lancedb.db.LanceTable` object to be passed. Defaults to `None`. 
- `vector_column_name`: Optional[Any], Column name to use for vector's in the table. Defaults to `'vector'`.   
- `doc_id_key`: Optional[str], Column name to use for document id's in the table. Defaults to `'doc_id'`.  
- `text_key`: Optional[str], Column name to use for text in the table. Defaults to `'text'`.  
- `api_key`: Optional[str], API key to use for LanceDB cloud database. Defaults to `None`.  
- `region`: Optional[str], Region to use for LanceDB cloud database. Only for LanceDB Cloud, defaults to `None`.  
- `nprobes` : Optional[int], Set the number of probes to use. Only applicable if ANN index is created on the table else its ignored. Defaults to `20`.
- `refine_factor` : Optional[int], Refine the results by reading extra elements and re-ranking them in memory. Defaults to `None`.
- `reranker`: Optional[Any], The reranker to use for LanceDB.
        Defaults to `None`.
- `overfetch_factor`: Optional[int], The factor by which to fetch more results.
        Defaults to `1`.
- `mode`: Optional[str], The mode to use for LanceDB.
            Defaults to `"overwrite"`.
- `query_type`:Optional[str], The type of query to use for LanceDB.
            Defaults to `"vector"`.


### Methods 

- __from_table(cls, table: lancedb.db.LanceTable) -> `LanceDBVectorStore`__ : (class method) Creates instance from lancedb table. 

- **_add_reranker(self, reranker: lancedb.rerankers.Reranker) -> `None`** : Add a reranker to an existing vector store. 
    - Usage :
        <CodeBlock filename="Python" language="Python" icon="python">
          {PyFrameworksLlamaindexAddReranker}
        </CodeBlock>               
- **_table_exists(self, tbl_name: `Optional[str]` = `None`) -> `bool`** : Returns `True` if `tbl_name` exists in database.
- __create_index(  
  self, scalar: `Optional[bool]` = False, col_name: `Optional[str]` = None, num_partitions: `Optional[int]` = 256, num_sub_vectors: `Optional[int]` = 96, index_cache_size: `Optional[int]` = None, metric: `Optional[str]` = "l2",  
) -> `None`__ : Creates a scalar(for non-vector cols) or a vector index on a table.
        Make sure your vector column has enough data before creating an index on it.

- __add(self, nodes: `List[BaseNode]`, **add_kwargs: `Any`, ) -> `List[str]`__ :
adds Nodes to the table

- **delete(self, ref_doc_id: `str`) -> `None`**: Delete nodes using with node_ids.
- **delete_nodes(self, node_ids: `List[str]`) -> `None`** : Delete nodes using with node_ids.
- __query(
        self,
        query: `VectorStoreQuery`,
        **kwargs: `Any`,
    ) -> `VectorStoreQueryResult`__:
        Query index(`VectorStoreIndex`) for top k most similar nodes. Accepts llamaIndex `VectorStoreQuery` object.