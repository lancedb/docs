{/* Auto-generated by scripts/mdx_snippets_gen.py. Do not edit manually. */}

export const TsCallCustomFunction = "const registry = getRegistry();\n\nconst sentenceTransformer = await registry\n  .get<SentenceTransformersEmbeddings>(\"sentence-transformers\")!\n  .create();\n\nconst schema = LanceSchema({\n  vector: sentenceTransformer.vectorField(),\n  text: sentenceTransformer.sourceField(),\n});\n\nconst db = await lancedb.connect(databaseDir);\nconst table = await db.createEmptyTable(\"table\", schema, {\n  mode: \"overwrite\",\n});\n\nawait table.add([{ text: \"hello\" }, { text: \"world\" }]);\n\nconst results = await table.search(\"greeting\").limit(1).toArray();\n";

export const TsEmbeddingImpl = "@register(\"sentence-transformers\")\nclass SentenceTransformersEmbeddings extends TextEmbeddingFunction {\n  name = \"Xenova/all-miniLM-L6-v2\";\n  #ndims!: number;\n  extractor!: FeatureExtractionPipeline;\n\n  async init() {\n    this.extractor = await pipeline(\"feature-extraction\", this.name, {\n      dtype: \"fp32\",\n    });\n    this.#ndims = await this.generateEmbeddings([\"hello\"]).then(\n      (e) => e[0].length,\n    );\n  }\n\n  ndims() {\n    return this.#ndims;\n  }\n\n  toJSON() {\n    return {\n      name: this.name,\n    };\n  }\n  async generateEmbeddings(texts: string[]) {\n    const output = await this.extractor(texts, {\n      pooling: \"mean\",\n      normalize: true,\n    });\n    return output.tolist();\n  }\n}\n";

export const TsImports = "import * as lancedb from \"@lancedb/lancedb\";\nimport {\n  LanceSchema,\n  TextEmbeddingFunction,\n  getRegistry,\n  register,\n} from \"@lancedb/lancedb/embedding\";\n";

